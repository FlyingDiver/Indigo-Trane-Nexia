<?xml version="1.0"?>
<Devices>
    <SupportURL>https://forums.indigodomo.com/viewforum.php?f=295</SupportURL>
     <Device type="custom" id="NexiaAccount">
        <Name>Nexia User Account</Name>
        <ConfigUI>
            <Field id="username" type="textfield">
                <Label>Username:</Label>
            </Field>
            <Field id="password" type="textfield" secure="true">
                <Label>Password:</Label>
            </Field>
            <Field id="address" type="textfield">
                <Label>House ID:</Label>
            </Field>
            <Field id="house_idNote" type="label" fontSize="small" fontColor="darkgray">
                <Label>Your house_id. You can get this from logging in and looking at the url once you're looking at your climate device. 
                https://www.mynexia.com/houses/&lt;house_id&gt;/climate</Label>
            </Field>
            <Field id="authStatus" type="textfield" readonly="true">
                <Label>Authentication Status:</Label>
            </Field>
        </ConfigUI>
        <States>
            <State id="authenticated" readonly="true">
                <ValueType boolType="YesNo">Boolean</ValueType>
                <TriggerLabel>Authenticated</TriggerLabel>
                <ControlPageLabel>Authenticated</ControlPageLabel>
            </State>
        </States>
        <UiDisplayStateId>authenticated</UiDisplayStateId>
   </Device>
    <Device type="custom" id="NexiaThermostat">
        <Name>Nexia Thermostat</Name>
        <ConfigUI>
            <Field id="SupportsStatusRequest" type="checkbox" defaultValue="false" hidden="true" />
            <Field id="account" type="menu">
                <Label>Nexia Account:</Label>
                <List class="self" method="get_account_list" dynamicReload="true"/>
                <CallbackMethod>menuChanged</CallbackMethod>
            </Field>
            <Field id="address" type="menu">
                <Label>Thermostat:</Label>
                <List class="self" filter="Available" method="get_thermostat_list" dynamicReload="true"/>
                <CallbackMethod>menuChanged</CallbackMethod>
            </Field>
        </ConfigUI>
         <States>
            <State id="system_status" readonly="true">
                <ValueType>String</ValueType>
                <TriggerLabel>System Status</TriggerLabel>
                <ControlPageLabel>System Status</ControlPageLabel>
            </State>
            <State id="name" readonly="true">
                <ValueType>String</ValueType>
                <TriggerLabel>Name</TriggerLabel>
                <ControlPageLabel>Name</ControlPageLabel>
            </State>
            <State id="model_number" readonly="true">
                <ValueType>String</ValueType>
                <TriggerLabel>Model</TriggerLabel>
                <ControlPageLabel>Model</ControlPageLabel>
            </State>
            <State id="manufacturer_code" readonly="true">
                <ValueType>String</ValueType>
                <TriggerLabel>manufacturer_code</TriggerLabel>
                <ControlPageLabel>manufacturer_code</ControlPageLabel>
            </State>
            <State id="type" readonly="true">
                <ValueType>String</ValueType>
                <TriggerLabel>Type</TriggerLabel>
                <ControlPageLabel>Type</ControlPageLabel>
            </State>
            <State id="fan_type" readonly="true">
                <ValueType>String</ValueType>
                <TriggerLabel>Fan Type</TriggerLabel>
                <ControlPageLabel>Fan Type</ControlPageLabel>
            </State>
            <State id="fan_speed" readonly="true">
                <ValueType>String</ValueType>
                <TriggerLabel>fan_speed</TriggerLabel>
                <ControlPageLabel>fan_speed</ControlPageLabel>
            </State>
            <State id="fan_mode" readonly="true">
                <ValueType>String</ValueType>
                <TriggerLabel>fan_mode</TriggerLabel>
                <ControlPageLabel>fan_mode</ControlPageLabel>
            </State>
            <State id="compressor_speed" readonly="true">
                <ValueType>String</ValueType>
                <TriggerLabel>compressor_speed</TriggerLabel>
                <ControlPageLabel>compressor_speed</ControlPageLabel>
            </State>
            <State id="air_cleaner_mode" readonly="true">
                <ValueType>String</ValueType>
                <TriggerLabel>air_cleaner_mode</TriggerLabel>
                <ControlPageLabel>air_cleaner_mode</ControlPageLabel>
            </State>
            <State id="zoning_enabled" readonly="true">
                <ValueType>String</ValueType>
                <TriggerLabel>zoning_enabled</TriggerLabel>
                <ControlPageLabel>zoning_enabled</ControlPageLabel>
            </State>
        </States>
        <UiDisplayStateId>system_status</UiDisplayStateId>
   </Device>
    <Device type="thermostat" id="NexiaZone">
        <Name>Nexia Zone</Name>
        <ConfigUI>
            <Field id="SupportsStatusRequest" type="checkbox" defaultValue="false" hidden="true" />
            <Field id="account" type="menu">
                <Label>Nexia Account:</Label>
                <List class="self" method="get_account_list" dynamicReload="true"/>
                <CallbackMethod>menuChanged</CallbackMethod>
            </Field>
            <Field id="thermostat" type="menu">
                <Label>Nexia Thermostat:</Label>
                <List class="self"  filter="Active" method="get_thermostat_list" dynamicReload="true"/>
                <CallbackMethod>menuChanged</CallbackMethod>
            </Field>
            <Field id="address" type="menu">
                <Label>Zone:</Label>
                <List class="self" filter="Available" method="get_zone_list" dynamicReload="true"/>
                <CallbackMethod>menuChanged</CallbackMethod>
            </Field>
        </ConfigUI>
         <States>
            <State id="zone_status" readonly="true">
                <ValueType>String</ValueType>
                <TriggerLabel>System Status</TriggerLabel>
                <ControlPageLabel>System Status</ControlPageLabel>
            </State>
            <State id="name" readonly="true">
                <ValueType>String</ValueType>
                <TriggerLabel>Name</TriggerLabel>
                <ControlPageLabel>Name</ControlPageLabel>
            </State>
        </States>
        <UiDisplayStateId>zone_status</UiDisplayStateId>
    </Device>
</Devices>
